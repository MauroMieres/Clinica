<div class="fondo-clinica d-flex justify-content-center align-items-center min-vh-100">
  <div class="card-formulario p-4 shadow-lg">
    <div class="text-center" *ngIf="!modoSolicitud">
      <button class="btn btn-primary mb-4" (click)="abrirSolicitud()">
        Solicitar Turno
      </button>
    </div>

 <!-- Formulario Solicitud de Turno -->
    <div *ngIf="modoSolicitud" class="mt-5">
      <h4>Solicitar Turno</h4>

          <!-- Si es admin, muestra el selector de paciente -->
<div *ngIf="userRole === 'admin'" class="mb-3">
  <label>Seleccioná un paciente:</label>
  <select class="form-select" [(ngModel)]="pacienteSeleccionadoPorAdmin">
    <option [value]="null" disabled selected>Elegí un paciente...</option>
    <option *ngFor="let p of pacientes" [value]="p.id">
      {{ p.nombre }} {{ p.apellido }}
    </option>
  </select>
</div>

      <div class="mb-3">
        <label>Buscar por:</label>
        <select class="form-select" [(ngModel)]="modoBusqueda">
          <option value="especialidad">Especialidad</option>
          <option value="especialista">Especialista</option>
        </select>
      </div>

  


      <!-- Buscar por especialidad -->
      <div *ngIf="modoBusqueda === 'especialidad'" class="mb-3">
        <label>Especialidad:</label>
        <select class="form-select" [(ngModel)]="especialidadSeleccionada" (change)="cargarEspecialistasPorEspecialidad()">
          <option *ngFor="let esp of especialidades" [value]="esp.id">{{ esp.nombre }}</option>
        </select>

        <label class="mt-3">Especialistas:</label>
        <select class="form-select" [(ngModel)]="especialistaSeleccionado" (change)="cargarHorariosDisponibles()">
          <option *ngFor="let esp of especialistasFiltrados" [value]="esp.id">{{ esp.nombre }} {{ esp.apellido }}</option>
        </select>
      </div>

      <!-- Buscar por especialista -->
      <div *ngIf="modoBusqueda === 'especialista'" class="mb-3">
        <label>Especialista:</label>
        <select class="form-select" [(ngModel)]="especialistaSeleccionado" (change)="cargarEspecialidadesPorEspecialista()">
          <option *ngFor="let esp of especialistas" [value]="esp.id">{{ esp.nombre }} {{ esp.apellido }}</option>
        </select>

        <label class="mt-3">Especialidad:</label>
        <select class="form-select" [(ngModel)]="especialidadSeleccionada" (change)="cargarHorariosDisponibles()">
          <option *ngFor="let esp of especialidadesFiltradas" [value]="esp.id">{{ esp.nombre }}</option>
        </select>
      </div>

      <!-- Horarios disponibles -->
      <div *ngIf="horariosDisponibles.length > 0" class="mt-4">
        <label class="form-label mt-3">Seleccione un horario:</label>
        <select class="form-select" [(ngModel)]="horarioSeleccionado">
          <option *ngFor="let h of horariosDisponibles" [ngValue]="h">
            {{ h.fecha_inicio | date: 'dd/MM HH:mm' }} a {{ h.fecha_fin | date: 'HH:mm' }}hs
          </option>
        </select>
      </div>

      <button class="btn btn-success mt-3" [disabled]="!horarioSeleccionado" (click)="confirmarTurno()">Confirmar turno</button>
    </div>
  